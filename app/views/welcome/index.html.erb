<h2>Dashboard</h2>

<% if current_user %>

<%= link_to image_tag('vaga/file_add.png', :border => 0), new_task_path %>

<br />

<h3>Scheduled</h3>

<table>
    <colgroup>
        <col width="50">
        <col width="100">
        <col width="200">
        <col width="300">
        <col width="50">
        <col width="50">
        <col width="50">
        <col width="100">
        <col width="100">
        <col width="100">
        <col width="100">
        <col width="50">
        <col width="50">
    </colgroup>
	<tr>
		<th></th>
		<th>Category</th>
		<th>Project</th>
		<th>Title</th>
		<th>Status</th>
		<th>Owner</th>
		<th>Organization</th>
		<th>Start Date</th>
		<th>Finish Date</th>
		<th>Est. Start Date</th>
		<th>Est. Finish Date</th>
		<th>Duration</th>
		<th>Est. Duration</th>
	</tr>

<% @scheduled_tasks.each do |task| %>
	<tr>
		<td> <%= link_to image_tag('vaga/file_edit.png', :border => 0), edit_task_path(task) %>
        <% if current_user.manager? %>
		<%= link_to image_tag('vaga/file_delete.png', :border => 0), task, :confirm => 'Are you sure?', :method => :delete %>
        <% end %>
        </td>
		<td> <%= task.category != nil ? (link_to task.category.name, task.category) : 'N/A' %> </td>
		<td> <%= task.project != nil ? (link_to task.project.name, task.project) : task.project_name %> </td>
		<td> <%= link_to task.title, task %> </td>
		<td> <%=h task.status.name %> </td>
		<td> <%=h task.owner ? task.owner.name : '-' %> </td>
		<td> <%=h task.organization ? task.organization.name : '-' %> </td>
		<td> <%=h task.start_date %> </td>
		<td> <%=h task.finish_date %> </td>
		<td> <%=h task.estimated_start_date %> </td>
		<td> <%=h task.estimated_finish_date %> </td>
		<td> <%=h task.duration %> </td>
		<td> <%=h task.estimated_duration %> </td>
  </tr>
<% end %>
</table>

<br />

<h3>Ongoing</h3>

<table>
    <colgroup>
        <col width="50">
        <col width="100">
        <col width="200">
        <col width="300">
        <col width="50">
        <col width="50">
        <col width="50">
        <col width="100">
        <col width="100">
        <col width="100">
        <col width="100">
        <col width="50">
        <col width="50">
    </colgroup>
	<tr>
		<th></th>
		<th>Category</th>
		<th>Project</th>
		<th>Title</th>
		<th>Status</th>
		<th>Owner</th>
		<th>Organization</th>
		<th>Start Date</th>
		<th>Finish Date</th>
		<th>Est. Start Date</th>
		<th>Est. Finish Date</th>
		<th>Duration</th>
		<th>Est. Duration</th>
	</tr>

<% @ongoing_tasks.each do |task| %>
	<tr>
		<td> <%= link_to image_tag('vaga/file_edit.png', :border => 0), edit_task_path(task) %>
        <% if current_user.manager? %>
		<%= link_to image_tag('vaga/file_delete.png', :border => 0), task, :confirm => 'Are you sure?', :method => :delete %>
        <% end %>
        </td>
		<td> <%= task.category != nil ? (link_to task.category.name, task.category) : 'N/A' %> </td>
		<td> <%= task.project != nil ? (link_to task.project.name, task.project) : task.project_name %> </td>
		<td> <%= link_to task.title, task %> </td>
		<td> <%=h task.status.name %> </td>
		<td> <%=h task.owner ? task.owner.name : '-' %> </td>
		<td> <%=h task.organization ? task.organization.name : '-' %> </td>
		<td> <%=h task.start_date %> </td>
		<td> <%=h task.finish_date %> </td>
		<td> <%=h task.estimated_start_date %> </td>
		<td> <%=h task.estimated_finish_date %> </td>
		<td> <%=h task.duration %> </td>
		<td> <%=h task.estimated_duration %> </td>
  </tr>
<% end %>
</table>
<br />

<h3>Done</h3>

<table>
    <colgroup>
        <col width="50">
        <col width="100">
        <col width="200">
        <col width="300">
        <col width="50">
        <col width="50">
        <col width="50">
        <col width="100">
        <col width="100">
        <col width="100">
        <col width="100">
        <col width="50">
        <col width="50">
    </colgroup>
	<tr>
		<th></th>
		<th>Category</th>
		<th>Project</th>
		<th>Title</th>
		<th>Status</th>
		<th>Owner</th>
		<th>Organization</th>
		<th>Start Date</th>
		<th>Finish Date</th>
		<th>Est. Start Date</th>
		<th>Est. Finish Date</th>
		<th>Duration</th>
		<th>Est. Duration</th>
	</tr>

<% @done_tasks.each do |task| %>
	<tr>
		<td> <%= link_to image_tag('vaga/file_edit.png', :border => 0), edit_task_path(task) %>
        <% if current_user.manager? %>
		<%= link_to image_tag('vaga/file_delete.png', :border => 0), task, :confirm => 'Are you sure?', :method => :delete %>
        <% end %>
        </td>
		<td> <%= task.category != nil ? (link_to task.category.name, task.category) : 'N/A' %> </td>
		<td> <%= task.project != nil ? (link_to task.project.name, task.project) : task.project_name %> </td>
		<td> <%= link_to task.title, task %> </td>
		<td> <%=h task.status.name %> </td>
		<td> <%=h task.owner ? task.owner.name : '-' %> </td>
		<td> <%=h task.organization ? task.organization.name : '-' %> </td>
		<td> <%=h task.start_date %> </td>
		<td> <%=h task.finish_date %> </td>
		<td> <%=h task.estimated_start_date %> </td>
		<td> <%=h task.estimated_finish_date %> </td>
		<td> <%=h task.duration %> </td>
		<td> <%=h task.estimated_duration %> </td>
  </tr>
<% end %>
</table>

<br />

<h3>Backlog</h3>

<table>
    <colgroup>
        <col width="50">
        <col width="100">
        <col width="200">
        <col width="300">
        <col width="50">
        <col width="50">
        <col width="50">
        <col width="100">
        <col width="100">
        <col width="100">
        <col width="100">
        <col width="50">
        <col width="50">
    </colgroup>
	<tr>
		<th></th>
		<th>Category</th>
		<th>Project</th>
		<th>Title</th>
		<th>Status</th>
		<th>Owner</th>
		<th>Organization</th>
		<th>Start Date</th>
		<th>Finish Date</th>
		<th>Est. Start Date</th>
		<th>Est. Finish Date</th>
		<th>Duration</th>
		<th>Est. Duration</th>
	</tr>

<% @undetermined_tasks.each do |task| %>
	<tr>
		<td> <%= link_to image_tag('vaga/file_edit.png', :border => 0), edit_task_path(task) %>
        <% if current_user.manager? %>
		<%= link_to image_tag('vaga/file_delete.png', :border => 0), task, :confirm => 'Are you sure?', :method => :delete %>
        <% end %>
        </td>
		<td> <%= task.category != nil ? (link_to task.category.name, task.category) : 'N/A' %> </td>
		<td> <%= task.project != nil ? (link_to task.project.name, task.project) : task.project_name %> </td>
		<td> <%= link_to task.title, task %> </td>
		<td> <%=h task.status.name %> </td>
		<td> <%=h task.owner ? task.owner.name : '-' %> </td>
		<td> <%=h task.organization ? task.organization.name : '-' %> </td>
		<td> <%=h task.start_date %> </td>
		<td> <%=h task.finish_date %> </td>
		<td> <%=h task.estimated_start_date %> </td>
		<td> <%=h task.estimated_finish_date %> </td>
		<td> <%=h task.duration %> </td>
		<td> <%=h task.estimated_duration %> </td>
  </tr>
<% end %>
</table>

<br />

<%= link_to image_tag('vaga/file_add.png', :border => 0), new_task_path %>

<% else %>
<p>Please <%= link_to "log in", login_path %> to use the system,
 or <%= link_to "sign up", signup_path %> for a new account.</p>
<% end %>


